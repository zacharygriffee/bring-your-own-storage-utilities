function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e,r={exports:{}},n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}r.exports=o,r.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,s),n(r)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}y(t,e,s,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&y(t,"error",e,r)}(t,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,s,o,u;if(a(r),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),void 0===o)o=s[e]=r,++t._eventsCount;else if("function"==typeof o?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=l(t))>0&&o.length>i&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=o.length,u=h,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=c.bind(n);return i.listener=r,n.wrapFn=i,i}function f(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):b(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function b(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function y(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(s){n.once&&t.removeEventListener(e,i),r(s)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var a=s[t];if(void 0===a)return!1;if("function"==typeof a)i(a,this,e);else{var l=a.length,h=b(a,l);for(r=0;r<l;++r)i(h[r],this,e)}return!0},o.prototype.addListener=function(t,e){return h(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return h(this,t,e,!0)},o.prototype.once=function(t,e){return a(e),this.on(t,d(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,d(this,t,e)),this},o.prototype.removeListener=function(t,e){var r,n,i,s,o;if(a(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return f(this,t,!0)},o.prototype.rawListeners=function(t){return f(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};var m=r.exports,_="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t);const v=class{constructor(t){if(!(t>0)||0!=(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}};const{EventEmitter:w}=m,g=new Error("Stream was destroyed"),x=new Error("Premature close"),S=_,L=class{constructor(t){this.hwm=t||16,this.head=new v(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(t){if(this.length++,!this.head.push(t)){const e=this.head;this.head=e.next=new v(2*this.head.buffer.length),this.head.push(t)}}shift(){0!==this.length&&this.length--;const t=this.tail.shift();if(void 0===t&&this.tail.next){const t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return t}peek(){const t=this.tail.peek();return void 0===t&&this.tail.next?this.tail.next.peek():t}isEmpty(){return 0===this.length}},E=134217727,A=1^E,k=64,T=128,O=256,I=1024,P=2048,C=4096,N=8192,U=16384,F=32768,j=768^E,M=134184959,q=1<<17,R=2<<17,D=4<<17,W=8<<17,z=16<<17,V=32<<17,B=64<<17,$=128<<17,Y=256<<17,J=512<<17,K=100532223,H=133693439,X=117440511,G=131088,Q=134086639,Z=4210688,tt=14,et=15,rt=4210702,nt=16809984,it=16809999,st=1179648,ot=1179663,ut=Symbol.asyncIterator||Symbol("asyncIterator");class at{constructor(t,{highWaterMark:e=16384,map:r=null,mapWritable:n,byteLength:i,byteLengthWritable:s}={}){this.stream=t,this.queue=new L,this.highWaterMark=e,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||i||Pt,this.map=n||r,this.afterWrite=bt.bind(this),this.afterUpdateNextTick=_t.bind(this)}get ended(){return 0!=(this.stream._duplexState&V)}push(t){return null!==this.map&&(t=this.map(t)),this.buffered+=this.byteLength(t),this.queue.push(t),this.buffered<this.highWaterMark?(this.stream._duplexState|=W,!0):(this.stream._duplexState|=3145728,!1)}shift(){const t=this.queue.shift();return this.buffered-=this.byteLength(t),0===this.buffered&&(this.stream._duplexState&=133169151),t}end(t){"function"==typeof t?this.stream.once("finish",t):null!=t&&this.push(t),this.stream._duplexState=(this.stream._duplexState|J)&H}autoBatch(t,e){const r=[],n=this.stream;for(r.push(t);(n._duplexState&ot)===st;)r.push(n._writableState.shift());if(0!=(n._duplexState&et))return e(null);n._writev(r,e)}update(){const t=this.stream;t._duplexState|=R;do{for(;(t._duplexState&ot)===W;){const e=this.shift();t._duplexState|=33685504,t._write(e,this.afterWrite)}0==(655360&t._duplexState)&&this.updateNonPrimary()}while(!0===this.continueUpdate());t._duplexState&=133955583}updateNonPrimary(){const t=this.stream;if((72482831&t._duplexState)===J)return t._duplexState=67108863&(t._duplexState|q),void t._final(ft.bind(this));4!=(t._duplexState&tt)?1==(t._duplexState&it)&&(t._duplexState=(t._duplexState|G)&A,t._open(vt.bind(this))):0==(t._duplexState&nt)&&(t._duplexState|=G,t._destroy(pt.bind(this)))}continueUpdate(){return 0!=(this.stream._duplexState&$)&&(this.stream._duplexState&=X,!0)}updateCallback(){(17563663&this.stream._duplexState)===D?this.update():this.updateNextTick()}updateNextTick(){0==(this.stream._duplexState&$)&&(this.stream._duplexState|=$,0==(this.stream._duplexState&R)&&S(this.afterUpdateNextTick))}}class lt{constructor(t,{highWaterMark:e=16384,map:r=null,mapReadable:n,byteLength:i,byteLengthReadable:s}={}){this.stream=t,this.queue=new L,this.highWaterMark=e,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=s||i||Pt,this.map=n||r,this.pipeTo=null,this.afterRead=yt.bind(this),this.afterUpdateNextTick=mt.bind(this)}get ended(){return 0!=(this.stream._duplexState&U)}pipe(t,e){if(null!==this.pipeTo)throw new Error("Can only pipe to one destination");if("function"!=typeof e&&(e=null),this.stream._duplexState|=512,this.pipeTo=t,this.pipeline=new ct(this.stream,t,e),e&&this.stream.on("error",Ct),It(t))t._writableState.pipeline=this.pipeline,e&&t.on("error",Ct),t.on("finish",this.pipeline.finished.bind(this.pipeline));else{const e=this.pipeline.done.bind(this.pipeline,t),r=this.pipeline.done.bind(this.pipeline,t,null);t.on("error",e),t.on("close",r),t.on("finish",this.pipeline.finished.bind(this.pipeline))}t.on("drain",dt.bind(this)),this.stream.emit("piping",t),t.emit("pipe",this.stream)}push(t){const e=this.stream;return null===t?(this.highWaterMark=0,e._duplexState=134152127&(e._duplexState|I),!1):(null!==this.map&&(t=this.map(t)),this.buffered+=this.byteLength(t),this.queue.push(t),e._duplexState=134152191&(e._duplexState|T),this.buffered<this.highWaterMark)}shift(){const t=this.queue.shift();return this.buffered-=this.byteLength(t),0===this.buffered&&(this.stream._duplexState&=134209407),t}unshift(t){const e=[null!==this.map?this.map(t):t];for(;this.buffered>0;)e.push(this.shift());for(let t=0;t<e.length-1;t++){const r=e[t];this.buffered+=this.byteLength(r),this.queue.push(r)}this.push(e[e.length-1])}read(){const t=this.stream;if((16527&t._duplexState)===T){const e=this.shift();return null!==this.pipeTo&&!1===this.pipeTo.write(e)&&(t._duplexState&=j),0!=(t._duplexState&P)&&t.emit("data",e),e}return null}drain(){const t=this.stream;for(;(16527&t._duplexState)===T&&0!=(768&t._duplexState);){const e=this.shift();null!==this.pipeTo&&!1===this.pipeTo.write(e)&&(t._duplexState&=j),0!=(t._duplexState&P)&&t.emit("data",e)}}update(){const t=this.stream;t._duplexState|=32;do{for(this.drain();this.buffered<this.highWaterMark&&0==(82975&t._duplexState);)t._duplexState|=65552,t._read(this.afterRead),this.drain();4224==(12431&t._duplexState)&&(t._duplexState|=N,t.emit("readable")),0==(80&t._duplexState)&&this.updateNonPrimary()}while(!0===this.continueUpdate());t._duplexState&=134217695}updateNonPrimary(){const t=this.stream;(1167&t._duplexState)===I&&(t._duplexState=134216703&(t._duplexState|U),t.emit("end"),(t._duplexState&rt)===Z&&(t._duplexState|=4),null!==this.pipeTo&&this.pipeTo.end()),4!=(t._duplexState&tt)?1==(t._duplexState&it)&&(t._duplexState=(t._duplexState|G)&A,t._open(vt.bind(this))):0==(t._duplexState&nt)&&(t._duplexState|=G,t._destroy(pt.bind(this)))}continueUpdate(){return 0!=(this.stream._duplexState&F)&&(this.stream._duplexState&=M,!0)}updateCallback(){(32879&this.stream._duplexState)===k?this.update():this.updateNextTick()}updateNextTick(){0==(this.stream._duplexState&F)&&(this.stream._duplexState|=F,0==(32&this.stream._duplexState)&&S(this.afterUpdateNextTick))}}class ht{constructor(t){this.data=null,this.afterTransform=wt.bind(t),this.afterFinal=null}}class ct{constructor(t,e,r){this.from=t,this.to=e,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(t,e){e&&(this.error=e),t!==this.to||(this.to=null,null===this.from)?t!==this.from||(this.from=null,null===this.to)?(null!==this.afterPipe&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):0==(t._duplexState&U)&&this.to.destroy(this.error||new Error("Readable stream closed before ending")):0!=(this.from._duplexState&U)&&this.pipeToFinished||this.from.destroy(this.error||new Error("Writable stream closed prematurely"))}}function dt(){this.stream._duplexState|=512,this.updateCallback()}function ft(t){const e=this.stream;t&&e.destroy(t),0==(e._duplexState&tt)&&(e._duplexState|=V,e.emit("finish")),(e._duplexState&rt)===Z&&(e._duplexState|=4),e._duplexState&=K,0==(e._duplexState&R)?this.update():this.updateNextTick()}function pt(t){const e=this.stream;t||this.error===g||(t=this.error),t&&e.emit("error",t),e._duplexState|=8,e.emit("close");const r=e._readableState,n=e._writableState;if(null!==r&&null!==r.pipeline&&r.pipeline.done(e,t),null!==n){for(;null!==n.drains&&n.drains.length>0;)n.drains.shift().resolve(!1);null!==n.pipeline&&n.pipeline.done(e,t)}}function bt(t){const e=this.stream;t&&e.destroy(t),e._duplexState&=K,null!==this.drains&&function(t){for(let e=0;e<t.length;e++)0==--t[e].writes&&(t.shift().resolve(!0),e--)}(this.drains),(3276815&e._duplexState)===z&&(e._duplexState&=132120575,(e._duplexState&B)===B&&e.emit("drain")),this.updateCallback()}function yt(t){t&&this.stream.destroy(t),this.stream._duplexState&=134217711,this.updateCallback()}function mt(){0==(32&this.stream._duplexState)&&(this.stream._duplexState&=M,this.update())}function _t(){0==(this.stream._duplexState&R)&&(this.stream._duplexState&=X,this.update())}function vt(t){const e=this.stream;t&&e.destroy(t),0==(4&e._duplexState)&&(0==(17423&e._duplexState)&&(e._duplexState|=k),0==(71303183&e._duplexState)&&(e._duplexState|=D),e.emit("open")),e._duplexState&=Q,null!==e._writableState&&e._writableState.updateCallback(),null!==e._readableState&&e._readableState.updateCallback()}function wt(t,e){null!=e&&this.push(e),this._writableState.afterWrite(t)}function gt(t){null!==this._readableState&&("data"===t&&(this._duplexState|=2304,this._readableState.updateNextTick()),"readable"===t&&(this._duplexState|=C,this._readableState.updateNextTick())),null!==this._writableState&&"drain"===t&&(this._duplexState|=B,this._writableState.updateNextTick())}class xt extends w{constructor(t){super(),this._duplexState=0,this._readableState=null,this._writableState=null,t&&(t.open&&(this._open=t.open),t.destroy&&(this._destroy=t.destroy),t.predestroy&&(this._predestroy=t.predestroy),t.signal&&t.signal.addEventListener("abort",Nt.bind(this))),this.on("newListener",gt)}_open(t){t(null)}_destroy(t){t(null)}_predestroy(){}get readable(){return null!==this._readableState||void 0}get writable(){return null!==this._writableState||void 0}get destroyed(){return 0!=(8&this._duplexState)}get destroying(){return 0!=(this._duplexState&tt)}destroy(t){0==(this._duplexState&tt)&&(t||(t=g),this._duplexState=133693375&(4|this._duplexState),null!==this._readableState&&(this._readableState.highWaterMark=0,this._readableState.error=t),null!==this._writableState&&(this._writableState.highWaterMark=0,this._writableState.error=t),this._duplexState|=2,this._predestroy(),this._duplexState&=134217725,null!==this._readableState&&this._readableState.updateNextTick(),null!==this._writableState&&this._writableState.updateNextTick())}}class St extends xt{constructor(t){super(t),this._duplexState|=4194305,this._readableState=new lt(this,t),t&&(t.read&&(this._read=t.read),t.eagerOpen&&this._readableState.updateNextTick())}_read(t){t(null)}pipe(t,e){return this._readableState.updateNextTick(),this._readableState.pipe(t,e),t}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(t){return this._readableState.updateNextTick(),this._readableState.push(t)}unshift(t){return this._readableState.updateNextTick(),this._readableState.unshift(t)}resume(){return this._duplexState|=O,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=134217471,this}static _fromAsyncIterator(t,e){let r;const n=new St({...e,read(e){t.next().then(i).then(e.bind(null,null)).catch(e)},predestroy(){r=t.return()},destroy(t){if(!r)return t(null);r.then(t.bind(null,null)).catch(t)}});return n;function i(t){t.done?n.push(null):n.push(t.value)}}static from(t,e){if(It(r=t)&&r.readable)return t;var r;if(t[ut])return this._fromAsyncIterator(t[ut](),e);Array.isArray(t)||(t=void 0===t?[]:[t]);let n=0;return new St({...e,read(e){this.push(n===t.length?null:t[n++]),e(null)}})}static isBackpressured(t){return 0!=(17422&t._duplexState)||t._readableState.buffered>=t._readableState.highWaterMark}static isPaused(t){return 0==(t._duplexState&O)}[ut](){const t=this;let e=null,r=null,n=null;return this.on("error",(t=>{e=t})),this.on("readable",(function(){null!==r&&i(t.read())})),this.on("close",(function(){null!==r&&i(null)})),{[ut](){return this},next:()=>new Promise((function(e,s){r=e,n=s;const o=t.read();null!==o?i(o):0!=(8&t._duplexState)&&i(null)})),return:()=>s(null),throw:t=>s(t)};function i(i){null!==n&&(e?n(e):null===i&&0==(t._duplexState&U)?n(g):r({value:i,done:null===i}),n=r=null)}function s(e){return t.destroy(e),new Promise(((r,n)=>{if(8&t._duplexState)return r({value:void 0,done:!0});t.once("close",(function(){e?n(e):r({value:void 0,done:!0})}))}))}}}class Lt extends xt{constructor(t){super(t),this._duplexState|=16385,this._writableState=new at(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final),t.eagerOpen&&this._writableState.updateNextTick())}_writev(t,e){e(null)}_write(t,e){this._writableState.autoBatch(t,e)}_final(t){t(null)}static isBackpressured(t){return 0!=(73400334&t._duplexState)}static drained(t){if(t.destroyed)return Promise.resolve(!1);const e=t._writableState;var r;const n=((r=t)._writev!==Lt.prototype._writev&&r._writev!==Et.prototype._writev?Math.min(1,e.queue.length):e.queue.length)+(t._duplexState&Y?1:0);return 0===n?Promise.resolve(!0):(null===e.drains&&(e.drains=[]),new Promise((t=>{e.drains.push({writes:n,resolve:t})})))}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}}class Et extends St{constructor(t){super(t),this._duplexState=1,this._writableState=new at(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final))}_writev(t,e){e(null)}_write(t,e){this._writableState.autoBatch(t,e)}_final(t){t(null)}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}}class At extends Et{constructor(t){super(t),this._transformState=new ht(this),t&&(t.transform&&(this._transform=t.transform),t.flush&&(this._flush=t.flush))}_write(t,e){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=t:this._transform(t,this._transformState.afterTransform)}_read(t){if(null!==this._transformState.data){const e=this._transformState.data;this._transformState.data=null,t(null),this._transform(e,this._transformState.afterTransform)}else t(null)}destroy(t){super.destroy(t),null!==this._transformState.data&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(t,e){e(null,t)}_flush(t){t(null)}_final(t){this._transformState.afterFinal=t,this._flush(kt.bind(this))}}function kt(t,e){const r=this._transformState.afterFinal;if(t)return r(t);null!=e&&this.push(e),this.push(null),r(null)}function Tt(t,...e){const r=Array.isArray(t)?[...t,...e]:[t,...e],n=r.length&&"function"==typeof r[r.length-1]?r.pop():null;if(r.length<2)throw new Error("Pipeline requires at least 2 streams");let i=r[0],s=null,o=null;for(let t=1;t<r.length;t++)s=r[t],It(i)?i.pipe(s,a):(u(i,!0,t>1,a),i.pipe(s)),i=s;if(n){let t=!1;const e=It(s)||!(!s._writableState||!s._writableState.autoDestroy);s.on("error",(t=>{null===o&&(o=t)})),s.on("finish",(()=>{t=!0,e||n(o)})),e&&s.on("close",(()=>n(o||(t?null:x))))}return s;function u(t,e,r,n){t.on("error",n),t.on("close",(function(){if(e&&t._readableState&&!t._readableState.ended)return n(x);if(r&&t._writableState&&!t._writableState.ended)return n(x)}))}function a(t){if(t&&!o){o=t;for(const e of r)e.destroy(t)}}}function Ot(t){return!!t._readableState||!!t._writableState}function It(t){return"number"==typeof t._duplexState&&Ot(t)}function Pt(t){return function(t){return"object"==typeof t&&null!==t&&"number"==typeof t.byteLength}(t)?t.byteLength:1024}function Ct(){}function Nt(){this.destroy(new Error("Stream aborted."))}var Ut={pipeline:Tt,pipelinePromise:function(...t){return new Promise(((e,r)=>Tt(...t,(t=>{if(t)return r(t);e()}))))},isStream:Ot,isStreamx:It,getStreamError:function(t){const e=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return e===g?null:e},Stream:xt,Writable:Lt,Readable:St,Duplex:Et,Transform:At,PassThrough:class extends At{}};function Ft(t,e="/"){return(e||"")+function(t,e,r=!0){const n=Array.isArray(e)?e:e.split("");if(n.indexOf(t[0])>-1){const e=Array.isArray(t)?t:t.split("");for(;n.indexOf(e[0])>-1;)e.shift();return r?e.join(""):e}return t}(t,e)}function jt(t){return"function"==typeof t}function Mt(t){const e=t((t=>{Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const qt=Mt((t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map(((t,e)=>`${e+1}) ${t.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e}));function Rt(t,e){if(t){const r=t.indexOf(e);0<=r&&t.splice(r,1)}}class Dt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const t of e)t.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(jt(r))try{r()}catch(e){t=e instanceof qt?e.errors:[e]}const{_finalizers:n}=this;if(n){this._finalizers=null;for(const e of n)try{Vt(e)}catch(e){t=null!=t?t:[],e instanceof qt?t=[...t,...e.errors]:t.push(e)}}if(t)throw new qt(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Vt(t);else{if(t instanceof Dt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Rt(e,t)}remove(t){const{_finalizers:e}=this;e&&Rt(e,t),t instanceof Dt&&t._removeParent(this)}}Dt.EMPTY=(()=>{const t=new Dt;return t.closed=!0,t})();const Wt=Dt.EMPTY;function zt(t){return t instanceof Dt||t&&"closed"in t&&jt(t.remove)&&jt(t.add)&&jt(t.unsubscribe)}function Vt(t){jt(t)?t():t.unsubscribe()}const Bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$t={setTimeout(t,e,...r){const{delegate:n}=$t;return(null==n?void 0:n.setTimeout)?n.setTimeout(t,e,...r):setTimeout(t,e,...r)},clearTimeout(t){const{delegate:e}=$t;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Yt(t){$t.setTimeout((()=>{const{onUnhandledError:e}=Bt;if(!e)throw t;e(t)}))}function Jt(){}const Kt=Ht("C",void 0,void 0);function Ht(t,e,r){return{kind:t,value:e,error:r}}function Xt(t){t()}class Gt extends Dt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,zt(t)&&t.add(this)):this.destination=ie}static create(t,e,r){return new ee(t,e,r)}next(t){this.isStopped?ne(function(t){return Ht("N",t,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ne(Ht("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ne(Kt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qt=Function.prototype.bind;function Zt(t,e){return Qt.call(t,e)}class te{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(t){re(t)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(t){re(t)}else re(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(t){re(t)}}}class ee extends Gt{constructor(t,e,r){let n;if(super(),jt(t)||!t)n={next:null!=t?t:void 0,error:null!=e?e:void 0,complete:null!=r?r:void 0};else{let e;this&&Bt.useDeprecatedNextContext?(e=Object.create(t),e.unsubscribe=()=>this.unsubscribe(),n={next:t.next&&Zt(t.next,e),error:t.error&&Zt(t.error,e),complete:t.complete&&Zt(t.complete,e)}):n=t}this.destination=new te(n)}}function re(t){Yt(t)}function ne(t,e){const{onStoppedNotification:r}=Bt;r&&$t.setTimeout((()=>r(t,e)))}const ie={closed:!0,next:Jt,error:function(t){throw t},complete:Jt},se="function"==typeof Symbol&&Symbol.observable||"@@observable";function oe(t){return t}class ue{constructor(t){t&&(this._subscribe=t)}lift(t){const e=new ue;return e.source=this,e.operator=t,e}subscribe(t,e,r){const n=(i=t)&&i instanceof Gt||function(t){return t&&jt(t.next)&&jt(t.error)&&jt(t.complete)}(i)&&zt(i)?t:new ee(t,e,r);var i;return Xt((()=>{const{operator:t,source:e}=this;n.add(t?t.call(n,e):e?this._subscribe(n):this._trySubscribe(n))})),n}_trySubscribe(t){try{return this._subscribe(t)}catch(e){t.error(e)}}forEach(t,e){return new(e=ae(e))(((e,r)=>{const n=new ee({next:e=>{try{t(e)}catch(t){r(t),n.unsubscribe()}},error:r,complete:e});this.subscribe(n)}))}_subscribe(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)}[se](){return this}pipe(...t){return(0===(e=t).length?oe:1===e.length?e[0]:function(t){return e.reduce(((t,e)=>e(t)),t)})(this);var e}toPromise(t){return new(t=ae(t))(((t,e)=>{let r;this.subscribe((t=>r=t),(t=>e(t)),(()=>t(r)))}))}}function ae(t){var e;return null!==(e=null!=t?t:Bt.Promise)&&void 0!==e?e:Promise}function le(t){return e=>{if(function(t){return jt(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function he(t,e,r,n,i){return new ce(t,e,r,n,i)}ue.create=t=>new ue(t);class ce extends Gt{constructor(t,e,r,n,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(r){try{e(r)}catch(e){t.error(e)}}:super._next,this._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}const de={schedule(t){let e=requestAnimationFrame,r=cancelAnimationFrame;const{delegate:n}=de;n&&(e=n.requestAnimationFrame,r=n.cancelAnimationFrame);const i=e((e=>{r=void 0,t(e)}));return new Dt((()=>null==r?void 0:r(i)))},requestAnimationFrame(...t){const{delegate:e}=de;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=de;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...t)},delegate:void 0},fe=Mt((t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}));class pe extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const e=new be(this,this);return e.operator=t,e}_throwIfClosed(){if(this.closed)throw new fe}next(t){Xt((()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const e of this.currentObservers)e.next(t)}}))}error(t){Xt((()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:e}=this;for(;e.length;)e.shift().error(t)}}))}complete(){Xt((()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}}))}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:e,isStopped:r,observers:n}=this;return e||r?Wt:(this.currentObservers=null,n.push(t),new Dt((()=>{this.currentObservers=null,Rt(n,t)})))}_checkFinalizedStatuses(t){const{hasError:e,thrownError:r,isStopped:n}=this;e?t.error(r):n&&t.complete()}asObservable(){const t=new ue;return t.source=this,t}}pe.create=(t,e)=>new be(t,e);class be extends pe{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:Wt}}const ye={now:()=>Date.now(),delegate:void 0};class me extends Dt{constructor(t,e){super()}schedule(t,e=0){return this}}const _e={setInterval(t,e,...r){const{delegate:n}=_e;return(null==n?void 0:n.setInterval)?n.setInterval(t,e,...r):setInterval(t,e,...r)},clearInterval(t){const{delegate:e}=_e;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0};class ve extends me{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,r=0){return _e.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&_e.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(t){n=!0,r=t||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Rt(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}let we,ge=1;const xe={};function Se(t){return t in xe&&(delete xe[t],!0)}const Le={setImmediate(t){const e=ge++;return xe[e]=!0,we||(we=Promise.resolve()),we.then((()=>Se(e)&&t())),e},clearImmediate(t){Se(t)}},{setImmediate:Ee,clearImmediate:Ae}=Le,ke={setImmediate(...t){const{delegate:e}=ke;return((null==e?void 0:e.setImmediate)||Ee)(...t)},clearImmediate(t){const{delegate:e}=ke;return((null==e?void 0:e.clearImmediate)||Ae)(t)},delegate:void 0};class Te{constructor(t,e=Te.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}}Te.now=ye.now;class Oe extends Te{constructor(t,e=Te.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}new class extends Oe{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let n;t=t||r.shift();do{if(n=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,n){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw n}}}(class extends ve{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=ke.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){var n;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:i}=t;null!=e&&(null===(n=i[i.length-1])||void 0===n?void 0:n.id)!==e&&(ke.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}}),new Oe(ve);new class extends Oe{}(class extends ve{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(t,e,r):(t.flush(this),0)}});new class extends Oe{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let n;t=t||r.shift();do{if(n=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,n){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw n}}}(class extends ve{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=de.requestAnimationFrame((()=>t.flush(void 0)))))}recycleAsyncId(t,e,r=0){var n;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);const{actions:i}=t;null!=e&&(null===(n=i[i.length-1])||void 0===n?void 0:n.id)!==e&&(de.cancelAnimationFrame(e),t._scheduled=void 0)}});(class extends Oe{constructor(t=Ie,e=1/0){super(t,(()=>this.frame)),this.maxFrames=e,this.frame=0,this.index=-1}flush(){const{actions:t,maxFrames:e}=this;let r,n;for(;(n=t[0])&&n.delay<=e&&(t.shift(),this.frame=n.delay,!(r=n.execute(n.state,n.delay))););if(r){for(;n=t.shift();)n.unsubscribe();throw r}}}).frameTimeFactor=10;class Ie extends ve{constructor(t,e,r=(t.index+=1)){super(t,e),this.scheduler=t,this.work=e,this.index=r,this.active=!0,this.index=t.index=r}schedule(t,e=0){if(Number.isFinite(e)){if(!this.id)return super.schedule(t,e);this.active=!1;const r=new Ie(this.scheduler,this.work);return this.add(r),r.schedule(t,e)}return Dt.EMPTY}requestAsyncId(t,e,r=0){this.delay=t.frame+r;const{actions:n}=t;return n.push(this),n.sort(Ie.sortActions),1}recycleAsyncId(t,e,r=0){}_execute(t,e){if(!0===this.active)return super._execute(t,e)}static sortActions(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1}}function Pe(t){return(e=(r=t)[r.length-1])&&jt(e.schedule)?t.pop():void 0;var e,r}function Ce(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{a(n.next(t))}catch(t){s(t)}}function u(t){try{a(n.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,u)}a((n=n.apply(t,e||[])).next())}))}function Ne(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ue(t){return this instanceof Ue?(this.v=t,this):new Ue(t)}function Fe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){s.push([t,e,r,n])>1||u(t,e)}))})}function u(t,e){try{(r=i[t](e)).value instanceof Ue?Promise.resolve(r.value.v).then(a,l):h(s[0][2],r)}catch(t){h(s[0][3],t)}var r}function a(t){u("next",t)}function l(t){u("throw",t)}function h(t,e){t(e),s.shift(),s.length&&u(s[0][0],s[0][1])}}function je(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=Ne(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}"function"==typeof SuppressedError&&SuppressedError;const Me=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function qe(t){return jt(null==t?void 0:t.then)}function Re(t){return jt(t[se])}function De(t){return Symbol.asyncIterator&&jt(null==t?void 0:t[Symbol.asyncIterator])}function We(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ze="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Ve(t){return jt(null==t?void 0:t[ze])}function Be(t){return Fe(this,arguments,(function*(){const e=t.getReader();try{for(;;){const{value:t,done:r}=yield Ue(e.read());if(r)return yield Ue(void 0);yield yield Ue(t)}}finally{e.releaseLock()}}))}function $e(t){return jt(null==t?void 0:t.getReader)}function Ye(t){if(t instanceof ue)return t;if(null!=t){if(Re(t))return i=t,new ue((t=>{const e=i[se]();if(jt(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Me(t))return n=t,new ue((t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()}));if(qe(t))return r=t,new ue((t=>{r.then((e=>{t.closed||(t.next(e),t.complete())}),(e=>t.error(e))).then(null,Yt)}));if(De(t))return Je(t);if(Ve(t))return e=t,new ue((t=>{for(const r of e)if(t.next(r),t.closed)return;t.complete()}));if($e(t))return Je(Be(t))}var e,r,n,i;throw We(t)}function Je(t){return new ue((e=>{(function(t,e){var r,n,i,s;return Ce(this,void 0,void 0,(function*(){try{for(r=je(t);!(n=yield r.next()).done;){const t=n.value;if(e.next(t),e.closed)return}}catch(t){i={error:t}}finally{try{n&&!n.done&&(s=r.return)&&(yield s.call(r))}finally{if(i)throw i.error}}e.complete()}))})(t,e).catch((t=>e.error(t)))}))}function Ke(t,e,r,n=0,i=!1){const s=e.schedule((function(){r(),i?t.add(this.schedule(null,n)):this.unsubscribe()}),n);if(t.add(s),!i)return s}function He(t,e=0){return le(((r,n)=>{r.subscribe(he(n,(r=>Ke(n,t,(()=>n.next(r)),e)),(()=>Ke(n,t,(()=>n.complete()),e)),(r=>Ke(n,t,(()=>n.error(r)),e))))}))}function Xe(t,e=0){return le(((r,n)=>{n.add(t.schedule((()=>r.subscribe(n)),e))}))}function Ge(t,e){if(!t)throw new Error("Iterable cannot be null");return new ue((r=>{Ke(r,e,(()=>{const n=t[Symbol.asyncIterator]();Ke(r,e,(()=>{n.next().then((t=>{t.done?r.complete():r.next(t.value)}))}),0,!0)}))}))}function Qe(t,e){if(null!=t){if(Re(t))return function(t,e){return Ye(t).pipe(Xe(e),He(e))}(t,e);if(Me(t))return function(t,e){return new ue((r=>{let n=0;return e.schedule((function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())}))}))}(t,e);if(qe(t))return function(t,e){return Ye(t).pipe(Xe(e),He(e))}(t,e);if(De(t))return Ge(t,e);if(Ve(t))return function(t,e){return new ue((r=>{let n;return Ke(r,e,(()=>{n=t[ze](),Ke(r,e,(()=>{let t,e;try{({value:t,done:e}=n.next())}catch(t){return void r.error(t)}e?r.complete():r.next(t)}),0,!0)})),()=>jt(null==n?void 0:n.return)&&n.return()}))}(t,e);if($e(t))return function(t,e){return Ge(Be(t),e)}(t,e)}throw We(t)}function Ze(t,e){return e?Qe(t,e):Ye(t)}var tr;function er(t,e,r=1/0){return jt(e)?er(((r,n)=>function(t,e){return le(((r,n)=>{let i=0;r.subscribe(he(n,(r=>{n.next(t.call(e,r,i++))})))}))}(((t,i)=>e(r,t,n,i)))(Ye(t(r,n)))),r):("number"==typeof e&&(r=e),le(((e,n)=>function(t,e,r,n,i,s,o,u){const a=[];let l=0,h=0,c=!1;const d=()=>{!c||a.length||l||e.complete()},f=t=>l<n?p(t):a.push(t),p=t=>{s&&e.next(t),l++;let u=!1;Ye(r(t,h++)).subscribe(he(e,(t=>{null==i||i(t),s?f(t):e.next(t)}),(()=>{u=!0}),void 0,(()=>{if(u)try{for(l--;a.length&&l<n;){const t=a.shift();o?Ke(e,o,(()=>p(t))):p(t)}d()}catch(t){e.error(t)}})))};return t.subscribe(he(e,f,(()=>{c=!0,d()}))),()=>{null==u||u()}}(e,n,t,r))))}function rr(){return function(t=1/0){return er(oe,t)}(1)}function nr(...t){return e=>function(...t){return rr()(Ze(t,Pe(t)))}(e,function(...t){return Ze(t,Pe(t))}(...t))}!function(t){t.NEXT="N",t.ERROR="E",t.COMPLETE="C"}(tr||(tr={})),Mt((t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"})),Mt((t=>function(){t(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"})),Mt((t=>function(e){t(this),this.name="NotFoundError",this.message=e})),Mt((t=>function(e){t(this),this.name="SequenceError",this.message=e})),Mt((t=>function(e=null){t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}));var ir={exports:{}};function sr(t){return t.length}var or={byteLength:sr,toString:function(t){const e=t.byteLength;let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r},write:function(t,e,r=0,n=sr(e)){const i=Math.min(n,t.byteLength-r);for(let n=0;n<i;n++)t[r+n]=e.charCodeAt(n);return i}};const ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ar=new Uint8Array(256);for(let t=0;t<64;t++)ar[ur.charCodeAt(t)]=t;function lr(t){let e=t.length;return 61===t.charCodeAt(e-1)&&e--,e>1&&61===t.charCodeAt(e-1)&&e--,3*e>>>2}ar[45]=62,ar[95]=63;var hr={byteLength:lr,toString:function(t){const e=t.byteLength;let r="";for(let n=0;n<e;n+=3)r+=ur[t[n]>>2]+ur[(3&t[n])<<4|t[n+1]>>4]+ur[(15&t[n+1])<<2|t[n+2]>>6]+ur[63&t[n+2]];return e%3==2?r=r.substring(0,r.length-1)+"=":e%3==1&&(r=r.substring(0,r.length-2)+"=="),r},write:function(t,e,r=0,n=lr(e)){const i=Math.min(n,t.byteLength-r);for(let r=0,n=0;n<i;r+=4){const i=ar[e.charCodeAt(r)],s=ar[e.charCodeAt(r+1)],o=ar[e.charCodeAt(r+2)],u=ar[e.charCodeAt(r+3)];t[n++]=i<<2|s>>4,t[n++]=(15&s)<<4|o>>2,t[n++]=(3&o)<<6|63&u}return i}};function cr(t){return t.length>>>1}var dr={byteLength:cr,toString:function(t){const e=t.byteLength;t=new DataView(t.buffer,t.byteOffset,e);let r="",n=0;for(let i=e-e%4;n<i;n+=4)r+=t.getUint32(n).toString(16).padStart(8,"0");for(;n<e;n++)r+=t.getUint8(n).toString(16).padStart(2,"0");return r},write:function(t,e,r=0,n=cr(e)){const i=Math.min(n,t.byteLength-r);for(let n=0;n<i;n++){const i=fr(e.charCodeAt(2*n)),s=fr(e.charCodeAt(2*n+1));if(void 0===i||void 0===s)return t.subarray(0,n);t[r+n]=i<<4|s}return i}};function fr(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:void 0}function pr(t){let e=0;for(let r=0,n=t.length;r<n;r++){const i=t.charCodeAt(r);if(i>=55296&&i<=56319&&r+1<n){const n=t.charCodeAt(r+1);if(n>=56320&&n<=57343){e+=4,r++;continue}}e+=i<=127?1:i<=2047?2:3}return e}let br,yr;if("undefined"!=typeof TextDecoder){const t=new TextDecoder;br=function(e){return t.decode(e)}}else br=function(t){const e=t.byteLength;let r="",n=0;for(;n<e;){let i=t[n];if(i<=127){r+=String.fromCharCode(i),n++;continue}let s=0,o=0;if(i<=223?(s=1,o=31&i):i<=239?(s=2,o=15&i):i<=244&&(s=3,o=7&i),e-n-s>0){let e=0;for(;e<s;)i=t[n+e+1],o=o<<6|63&i,e+=1}else o=65533,s=e-n;r+=String.fromCodePoint(o),n+=s+1}return r};if("undefined"!=typeof TextEncoder){const t=new TextEncoder;yr=function(e,r,n=0,i=pr(r)){const s=Math.min(i,e.byteLength-n);return t.encodeInto(r,e.subarray(n,n+s)),s}}else yr=function(t,e,r=0,n=pr(e)){const i=Math.min(n,t.byteLength-r);t=t.subarray(r,r+i);let s=0,o=0;for(;s<e.length;){const r=e.codePointAt(s);if(r<=127){t[o++]=r,s++;continue}let n=0,i=0;for(r<=2047?(n=6,i=192):r<=65535?(n=12,i=224):r<=2097151&&(n=18,i=240),t[o++]=i|r>>n,n-=6;n>=0;)t[o++]=128|r>>n&63,n-=6;s+=r>=65536?2:1}return i};var mr={byteLength:pr,toString:br,write:yr};function _r(t){return 2*t.length}var vr={byteLength:_r,toString:function(t){const e=t.byteLength;let r="";for(let n=0;n<e-1;n+=2)r+=String.fromCharCode(t[n]+256*t[n+1]);return r},write:function(t,e,r=0,n=_r(e)){const i=Math.min(n,t.byteLength-r);let s=i;for(let n=0;n<e.length&&!((s-=2)<0);++n){const i=e.charCodeAt(n),s=i>>8,o=i%256;t[r+2*n]=o,t[r+2*n+1]=s}return i}};!function(t,e){const r=or,n=hr,i=dr,s=mr,o=vr,u=255===new Uint8Array(Uint16Array.of(255).buffer)[0];function a(t){switch(t){case"ascii":return r;case"base64":return n;case"hex":return i;case"utf8":case"utf-8":case void 0:return s;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o;default:throw new Error(`Unknown encoding: ${t}`)}}function l(t){return t instanceof Uint8Array}function h(t,e,r){return"string"==typeof t?function(t,e){const r=a(e),n=new Uint8Array(r.byteLength(t));return r.write(n,t,0,n.byteLength),n}(t,e):Array.isArray(t)?function(t){const e=new Uint8Array(t.length);return e.set(t),e}(t):ArrayBuffer.isView(t)?function(t){const e=new Uint8Array(t.byteLength);return e.set(t),e}(t):function(t,e,r){return new Uint8Array(t,e,r)}(t,e,r)}function c(t,e,r,n,i){if(0===t.byteLength)return-1;if("string"==typeof r?(n=r,r=0):void 0===r?r=i?0:t.length-1:r<0&&(r+=t.byteLength),r>=t.byteLength){if(i)return-1;r=t.byteLength-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e)e=h(e,n);else if("number"==typeof e)return e&=255,i?t.indexOf(e,r):t.lastIndexOf(e,r);if(0===e.byteLength)return-1;if(i){let n=-1;for(let i=r;i<t.byteLength;i++)if(t[i]===e[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===e.byteLength)return n}else-1!==n&&(i-=i-n),n=-1}else{r+e.byteLength>t.byteLength&&(r=t.byteLength-e.byteLength);for(let n=r;n>=0;n--){let r=!0;for(let i=0;i<e.byteLength;i++)if(t[n+i]!==e[i]){r=!1;break}if(r)return n}}return-1}function d(t,e,r,n){return c(t,e,r,n,!0)}function f(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}t.exports=e={isBuffer:l,isEncoding:function(t){try{return a(t),!0}catch{return!1}},alloc:function(t,r,n){const i=new Uint8Array(t);return void 0!==r&&e.fill(i,r,0,i.byteLength,n),i},allocUnsafe:function(t){return new Uint8Array(t)},allocUnsafeSlow:function(t){return new Uint8Array(t)},byteLength:function(t,e){return a(e).byteLength(t)},compare:function(t,e){if(t===e)return 0;const r=Math.min(t.byteLength,e.byteLength);t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;for(let i=r-r%4;n<i;n+=4){if(t.getUint32(n,u)!==e.getUint32(n,u))break}for(;n<r;n++){const r=t.getUint8(n),i=e.getUint8(n);if(r<i)return-1;if(r>i)return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0},concat:function(t,e){void 0===e&&(e=t.reduce(((t,e)=>t+e.byteLength),0));const r=new Uint8Array(e);let n=0;for(const e of t){if(n+e.byteLength>r.byteLength){const t=e.subarray(0,r.byteLength-n);return r.set(t,n),r}r.set(e,n),n+=e.byteLength}return r},copy:function(t,e,r=0,n=0,i=t.byteLength){if(i>0&&i<n)return 0;if(i===n)return 0;if(0===t.byteLength||0===e.byteLength)return 0;if(r<0)throw new RangeError("targetStart is out of range");if(n<0||n>=t.byteLength)throw new RangeError("sourceStart is out of range");if(i<0)throw new RangeError("sourceEnd is out of range");r>=e.byteLength&&(r=e.byteLength),i>t.byteLength&&(i=t.byteLength),e.byteLength-r<i-n&&(i=e.length-r+n);const s=i-n;return t===e?e.copyWithin(r,n,i):e.set(t.subarray(n,i),r),s},equals:function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;const r=t.byteLength;t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;for(let i=r-r%4;n<i;n+=4)if(t.getUint32(n,u)!==e.getUint32(n,u))return!1;for(;n<r;n++)if(t.getUint8(n)!==e.getUint8(n))return!1;return!0},fill:function(t,e,r,n,i){if("string"==typeof e?"string"==typeof r?(i=r,r=0,n=t.byteLength):"string"==typeof n&&(i=n,n=t.byteLength):"number"==typeof e?e&=255:"boolean"==typeof e&&(e=+e),r<0||t.byteLength<r||t.byteLength<n)throw new RangeError("Out of range index");if(void 0===r&&(r=0),void 0===n&&(n=t.byteLength),n<=r)return t;if(e||(e=0),"number"==typeof e)for(let i=r;i<n;++i)t[i]=e;else{const s=(e=l(e)?e:h(e,i)).byteLength;for(let i=0;i<n-r;++i)t[i+r]=e[i%s]}return t},from:h,includes:function(t,e,r,n){return-1!==d(t,e,r,n)},indexOf:d,lastIndexOf:function(t,e,r,n){return c(t,e,r,n,!1)},swap16:function(t){const e=t.byteLength;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)f(t,r,r+1);return t},swap32:function(t){const e=t.byteLength;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)f(t,r,r+3),f(t,r+1,r+2);return t},swap64:function(t){const e=t.byteLength;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)f(t,r,r+7),f(t,r+1,r+6),f(t,r+2,r+5),f(t,r+3,r+4);return t},toBuffer:function(t){return t},toString:function(t,e,r=0,n=t.byteLength){const i=t.byteLength;return r>=i||n<=r?"":(r<0&&(r=0),n>i&&(n=i),(0!==r||n<i)&&(t=t.subarray(r,n)),a(e).toString(t))},write:function(t,e,r,n,i){return void 0===r?i="utf8":void 0===n&&"string"==typeof r?(i=r,r=void 0):void 0===i&&"string"==typeof n&&(i=n,n=void 0),a(i).write(t,e,r,n)},writeDoubleLE:function(t,e,r){return void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),r+8},writeFloatLE:function(t,e,r){return void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),r+4},writeUInt32LE:function(t,e,r){return void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(r,e,!0),r+4},writeInt32LE:function(t,e,r){return void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setInt32(r,e,!0),r+4},readDoubleLE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e,!0)},readFloatLE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e,!0)},readUInt32LE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getUint32(e,!0)},readInt32LE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getInt32(e,!0)}}}(ir,ir.exports);const wr=ir.exports;var gr=xr;function xr(t,e){if("object"==typeof t&&t)return(r=t).encode&&r.decode&&r.preencode?function(t){return{name:"compact-encoding",encode:function(e){const r={start:0,end:0,buffer:null,cache:null};return t.preencode(r,e),r.buffer=wr.allocUnsafe(r.end),t.encode(r,e),r.buffer},decode:function(e){return t.decode({start:0,end:e.byteLength,buffer:e,cache:null})}}}(t):t;var r;switch(t){case"ndjson":return xr.ndjson;case"json":return xr.json;case"ascii":return xr.ascii;case"utf-8":case"utf8":return xr.utf8;case"hex":return xr.hex;case"base64":return xr.base64;case"ucs-2":case"ucs2":return xr.ucs2;case"utf16-le":case"utf16le":return xr.utf16le}return void 0!==e?e:xr.binary}function Sr(t){return{name:t?"ndjson":"json",encode:t?function(t){return wr.from(JSON.stringify(t)+"\n")}:function(t){return wr.from(JSON.stringify(t))},decode:function(t){return JSON.parse(wr.toString(t))}}}function Lr(t){return{name:t,encode:function(e){return"string"!=typeof e&&(e=e.toString()),wr.from(e,t)},decode:function(e){return wr.toString(e,t)}}}xr.ascii=Lr("ascii"),xr.utf8=Lr("utf-8"),xr.hex=Lr("hex"),xr.base64=Lr("base64"),xr.ucs2=Lr("ucs2"),xr.utf16le=Lr("utf16le"),xr.ndjson=Sr(!0),xr.json=Sr(!1),xr.binary={name:"binary",encode:function(t){return"string"==typeof t?wr.from(t,"utf-8"):wr.toBuffer(t)},decode:function(t){return wr.toBuffer(t)}};var Er=t(gr);function Ar(t,e){return{get:async(e,r={})=>(e=Ft(e),Or(await Promise.resolve(t(e,r)),r)),exists:async(e,r={})=>Tr(await Promise.resolve(t(Ft(e),r))),readdir(t="/",r={}){"object"==typeof t&&(t=(r=t).cwd);let{cwd:n=t||"/",recursive:i=!1}=r;n.endsWith("/")||(n+="/",r.cwd=n);const s=Ft(n).split("/"),o=new Ut.Readable;try{return o}finally{const t=new Set;e.pipe(nr(null)).subscribe((e=>{if(null===e)return o.push(null);if(e=Ft(e),i)return o.push(t[e]=e);const r=(e||"/").split("/")[s.length-1];r&&!t.has(r)&&(t.add(r),o.push(r))}))}}}}function kr(t){return{get collection(){return t},exists:t=>Tr(e(t)),get:(t,r={})=>Or(e(t),r),readdir(e="/",r={}){"object"==typeof e&&(e=(r=e).cwd);let{cwd:n=e,recursive:i=!1}=r;n.endsWith("/")||(n=r.cwd+="/");const s=new Ut.Readable,o=Ft(n).split("/");try{return s}finally{const e=new Set;Object.keys(t).forEach((t=>{if(t=Ft(t),i)return s.push(e[t]=t);const r=(t||"/").split("/")[o.length-1];r&&!e.has(r)&&(e.add(r),s.push(r))})),s.push(null)}}};function e(e){return Object.entries(t).find((([t])=>Ft(e)===Ft(t)))?.[1]}}function Tr(t){return new Promise((e=>{if(!t)return e(!1);t.stat(((t,r)=>e(!t&&(!!r&&!!r.size))))}))}function Or(t,e){if(!t){const t=new Error("File doesn't exist.");return t.status="ENOENT",Promise.reject(t)}let{valueEncoding:r,encoding:n=Er(r)}=e;return new Promise(((e,r)=>{t.stat(((i,s)=>{if(i)return r(i);t.read(0,s.size,((t,i)=>{if(t)return r(t);e(n?n.decode(i):i)}))}))}))}export{Ar as fromRandomAccess,kr as fromRandomAccessCollection};
