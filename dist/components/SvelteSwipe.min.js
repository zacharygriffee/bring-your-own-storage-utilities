class e{constructor(e={}){this.element=e.element,this.wrapper=this.element.querySelector(".swipeable-slot-wrapper"),this.handler=this.element.querySelector(".swipe-handler"),this.elements=this.wrapper.querySelectorAll(".swipeable-item"),this.elements_count=this.elements.length,this.is_vertical=e.is_vertical,this.transition_duration=e.transition_duration,this.allow_infinite_swipe=e.allow_infinite_swipe,this.pos_axis=0,this.page_axis=e.is_vertical?"pageY":"pageX",this.axis=0,this.long_touch=!1,this.last_axis_pos=0,this.default_index=0,this.active_indicator=0,this.active_item=0,this.touch_active=!1,e.allow_infinite_swipe&&this.setInfiniteSwipe(),this.SWIPE=this.swipe.bind(this),this.SWIPE_START=this.swipeStart.bind(this),this.SWIPE_END=this.swipeEnd.bind(this),this.handler.addEventListener("touchstart",this.SWIPE_START),this.handler.addEventListener("mousedown",this.SWIPE_START)}prevent(e){e&&e.cancelable&&e.preventDefault(),e&&e.stopImmediatePropagation(),e&&e.stopPropagation()}update(){let{offsetWidth:e,offsetHeight:t}=this.wrapper;this.available_space=this.is_vertical?t:e,this.setElementsPosition({init:!0,elems:[...this.elements],available_space:this.available_space,has_infinite_loop:this.allow_infinite_swipe}),this.available_distance=0,this.available_measure=this.available_space*(this.elements_count-1),this.default_index&&this.changeItem(this.default_index)}setInfiniteSwipe(){this.wrapper.prepend(this.elements[this.elements_count-1].cloneNode(!0)),this.wrapper.append(this.elements[0].cloneNode(!0)),this.elements=this.element.querySelectorAll(".swipeable-item")}setElementsPosition({elems:e=[],available_space:t=0,pos_axis:i=0,has_infinite_loop:s=!1,distance:n=0,moving:a=!1,init:l=!1,end:r=!1,reset:o=!1}){e.forEach(((e,h)=>{let c=s?h-1:h;l&&(e.style.transform=this.generateTranslateValue(t*c),e.classList.remove("is-item-hidden")),a&&(e.style.cssText=this.generateTouchPosCss(t*c-n)),r&&(e.style.cssText=this.generateTouchPosCss(t*c-i,!0)),o&&(e.style.cssText=this.generateTouchPosCss(t*c-i))}))}generateTranslateValue(e){return this.is_vertical?`translate3d(0, ${e}px, 0)`:`translate3d(${e}px, 0, 0)`}generateTouchPosCss(e,t=!1){let i=this.generateTranslateValue(e);return`\n-webkit-transition-duration: ${t?this.transition_duration:"0"}ms;\ntransition-duration: ${t?this.transition_duration:"0"}ms;\n-webkit-transform: ${i};\n-ms-transform: ${i};`}swipeStart(e){this.prevent(e),this.touch_active=!0,this.long_touch=!1,setTimeout((()=>{this.long_touch=!0}),250),this.axis=e.touches?e.touches[0][this.page_axis]:e[this.page_axis],this.eventDelegate("add")}swipe(e){if(this.touch_active){this.prevent(e);let t=e.touches?e.touches[0][this.page_axis]:e[this.page_axis],i=this.axis-t+this.pos_axis;if(!this.allow_infinite_swipe&&(0==this.pos_axis&&this.axis<t||this.pos_axis==this.available_measure&&this.axis>t))return;e.preventDefault(),this.setElementsPosition({moving:!0,elems:[...this.elements],available_space:this.available_space,has_infinite_loop:this.allow_infinite_swipe,distance:i}),this.available_distance=i,this.last_axis_pos=t}}swipeEnd(e){this.prevent(e);let t=this.axis<this.last_axis_pos;this.touch_active=!1;let i=this.available_space,s=Math.round(this.available_space/50)>Math.abs(this.axis-this.last_axis_pos);this.long_touch||s?this.available_distance=Math.round(this.available_distance/i)*i:this.available_distance=t?Math.floor(this.available_distance/i)*i:Math.ceil(this.available_distance/i)*i,this.axis=null,this.last_axis_pos=null,this.pos_axis=this.available_distance,this.active_indicator=this.available_distance/i,this.active_item=this.active_indicator,this.default_index=this.active_item,this.setElementsPosition({end:!0,elems:[...this.elements],available_space:i,pos_axis:this.pos_axis,has_infinite_loop:this.allow_infinite_swipe}),this.allow_infinite_swipe&&(-1===this.active_item&&(this.pos_axis=i*(this.elements_count-1)),this.active_item===this.elements_count&&(this.pos_axis=0),this.active_indicator=this.pos_axis/i,this.active_item=this.active_indicator,this.default_index=this.active_item,setTimeout((()=>{this.setElementsPosition({reset:!0,elems:[...this.elements],available_space:i,pos_axis:this.pos_axis,has_infinite_loop:this.allow_infinite_swipe})}),this.transition_duration));let n=t?"right":"left";this.eventDelegate("remove");const a=new CustomEvent("swipe_end",{detail:{active_item:this.active_item,swipe_direction:n,active_element:this.elements[this.active_item]}});this.element.dispatchEvent(a)}eventDelegate(e){let t={add:"addEventListener",remove:"removeEventListener"};"undefined"!=typeof window&&(window[t[e]]("mousemove",this.SWIPE),window[t[e]]("mouseup",this.SWIPE_END),window[t[e]]("touchmove",this.SWIPE,{passive:!1}),window[t[e]]("touchend",this.SWIPE_END,{passive:!1}))}changeItem(e){let t=this.available_space;this.available_distance=t*e,this.active_indicator=e,this.swipeEnd()}goTo(e){let t=this.allow_infinite_swipe?e:Math.max(0,Math.min(e,this.elements_count-1));this.changeItem(t)}prevItem(){let e=this.active_indicator-1;this.goTo(e)}nextItem(){let e=this.active_indicator+1;this.goTo(e)}getProps(){return{elements_count:this.elements_count,active_item:this.active_item,active_element:null!==this.elements?this.elements[this.active_item]:null}}}function t(e){SvelteInternal.append_styles(e,"svelte-qzwsjx",".swipe-panel.svelte-qzwsjx.svelte-qzwsjx{position:relative;height:var(--sv-swipe-panel-height, 100%);width:var(--sv-swipe-panel-width, inherit)}.swipe-item-wrapper.svelte-qzwsjx.svelte-qzwsjx{overflow:hidden;position:relative;height:inherit;z-index:var(--sv-swipe-panel-wrapper-index, 2);pointer-events:none}.swipeable-slot-wrapper.svelte-qzwsjx.svelte-qzwsjx{position:relative;width:inherit;height:inherit}.swipe-handler.svelte-qzwsjx.svelte-qzwsjx{width:100%;position:absolute;top:var(--sv-swipe-handler-top, 0px);bottom:0px;left:0;right:0;background:rgba(0, 0, 0, 0)}.swipe-indicator.svelte-qzwsjx.svelte-qzwsjx{position:relative;bottom:1.5rem;display:flex;justify-content:center;z-index:var(--sv-swipe-panel-wrapper-index, 2);pointer-events:none}.dot.svelte-qzwsjx.svelte-qzwsjx{height:10px;width:10px;background-color:transparent;border:1px solid grey;border-radius:50%;display:inline-block;margin:0px 2px;cursor:pointer;pointer-events:fill}.swipe-indicator.svelte-qzwsjx .is-active.svelte-qzwsjx{background-color:var(--sv-swipe-indicator-active-color, grey)}")}function i(e,t,i){const s=e.slice();return s[35]=t[i],s[37]=i,s}function s(e){let t,s=SvelteInternal.ensure_array_like(e[2]),a=[];for(let t=0;t<s.length;t+=1)a[t]=n(i(e,s,t));return{c(){t=SvelteInternal.element("div");for(let e=0;e<a.length;e+=1)a[e].c();SvelteInternal.attr(t,"class","swipe-indicator swipe-indicator-inside svelte-qzwsjx")},m(e,i){SvelteInternal.insert(e,t,i);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,null)},p(e,l){if(70&l[0]){let r;for(s=SvelteInternal.ensure_array_like(e[2]),r=0;r<s.length;r+=1){const o=i(e,s,r);a[r]?a[r].p(o,l):(a[r]=n(o),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}},d(e){e&&SvelteInternal.detach(t),SvelteInternal.destroy_each(a,e)}}}function n(e){let t,i,s,n,a;function l(){return e[22](e[37])}function r(...t){return e[23](e[37],...t)}return{c(){t=SvelteInternal.element("span"),SvelteInternal.attr(t,"role","radio"),SvelteInternal.attr(t,"tabindex","0"),SvelteInternal.attr(t,"aria-checked",i=e[1]===e[37]),SvelteInternal.attr(t,"class",s="dot "+(e[1]===e[37]?"is-active":"")+" svelte-qzwsjx")},m(e,i){SvelteInternal.insert(e,t,i),n||(a=[SvelteInternal.listen(t,"click",l),SvelteInternal.listen(t,"keydown",r)],n=!0)},p(n,a){e=n,2&a[0]&&i!==(i=e[1]===e[37])&&SvelteInternal.attr(t,"aria-checked",i),2&a[0]&&s!==(s="dot "+(e[1]===e[37]?"is-active":"")+" svelte-qzwsjx")&&SvelteInternal.attr(t,"class",s)},d(e){e&&SvelteInternal.detach(t),n=!1,SvelteInternal.run_all(a)}}}function a(e){let t,i,n,a,l,r,o,h,c;const v=e[21].default,p=SvelteInternal.create_slot(v,e,e[20],null);let _=e[0]&&s(e);return{c(){t=SvelteInternal.element("div"),i=SvelteInternal.element("div"),n=SvelteInternal.element("div"),p&&p.c(),a=SvelteInternal.space(),l=SvelteInternal.element("div"),r=SvelteInternal.space(),_&&_.c(),SvelteInternal.attr(n,"class","swipeable-slot-wrapper svelte-qzwsjx"),SvelteInternal.attr(i,"class","swipe-item-wrapper svelte-qzwsjx"),SvelteInternal.attr(l,"role","presentation"),SvelteInternal.attr(l,"class","swipe-handler svelte-qzwsjx"),SvelteInternal.attr(t,"class","swipe-panel svelte-qzwsjx")},m(s,v){SvelteInternal.insert(s,t,v),SvelteInternal.append(t,i),SvelteInternal.append(i,n),p&&p.m(n,null),SvelteInternal.append(t,a),SvelteInternal.append(t,l),SvelteInternal.append(t,r),_&&_.m(t,null),e[24](t),o=!0,h||(c=[SvelteInternal.listen(l,"mouseover",e[4]),SvelteInternal.listen(l,"mouseout",e[5])],h=!0)},p(e,i){p&&p.p&&(!o||1048576&i[0])&&SvelteInternal.update_slot_base(p,v,e,e[20],o?SvelteInternal.get_slot_changes(v,e[20],i,null):SvelteInternal.get_all_dirty_from_scope(e[20]),null),e[0]?_?_.p(e,i):(_=s(e),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},i(e){o||(SvelteInternal.transition_in(p,e),o=!0)},o(e){SvelteInternal.transition_out(p,e),o=!1},d(i){i&&SvelteInternal.detach(t),p&&p.d(i),_&&_.d(),e[24](null),h=!1,SvelteInternal.run_all(c)}}}function l(t,i,s){let{$$slots:n={},$$scope:a}=i;const{onMount:l,onDestroy:r,createEventDispatcher:o}=SvelteInternal;let{transitionDuration:h=200}=i,{showIndicators:c=!1}=i,{autoplay:v=!1}=i,{delay:p=1e3}=i,{defaultIndex:_=0}=i;let{is_vertical:d=!1}=i,{allow_infinite_swipe:u=!1}=i;let w,m,I=null,f=0,S=0,g=_||0,x=!1,$=!1;const b=o();function y(){I.update();let e=I.getProps();s(18,S=e.elements_count)}function E(e){I.goTo(e);let t=I.getProps();s(1,f=t.active_item)}function q(){$||(u?z():(E(g),g=g<S-1?++g:0))}function z(){I.nextItem();let e=I.getProps();s(1,f=e.active_item)}l((()=>{I=new e({element:m,is_vertical:d,transition_duration:h,allow_infinite_swipe:u}),y(),m.addEventListener("swipe_end",(e=>{b("change",e.detail),s(1,f=e.detail.active_item)})),"undefined"!=typeof window&&window.addEventListener("resize",y)})),r((()=>{"undefined"!=typeof window&&window.removeEventListener("resize",y)}));return t.$$set=e=>{"transitionDuration"in e&&s(7,h=e.transitionDuration),"showIndicators"in e&&s(0,c=e.showIndicators),"autoplay"in e&&s(8,v=e.autoplay),"delay"in e&&s(9,p=e.delay),"defaultIndex"in e&&s(10,_=e.defaultIndex),"is_vertical"in e&&s(12,d=e.is_vertical),"allow_infinite_swipe"in e&&s(13,u=e.allow_infinite_swipe),"$$scope"in e&&s(20,a=e.$$scope)},t.$$.update=()=>{262144&t.$$.dirty[0]&&s(2,w=Array(S)),525056&t.$$.dirty[0]&&(v&&!x&&s(19,x=setInterval(q,p)),!v&&x&&(clearInterval(x),s(19,x=!1)))},[c,f,w,m,function(){v&&($=!0)},function(){v&&($=!1)},E,h,v,p,_,0,d,u,!1,function(e){I.goTo(e)},function(){I.prevItem();let e=I.getProps();s(1,f=e.active_item)},z,S,x,a,n,e=>{E(e)},(e,t)=>{"Enter"===t.key&&E(e)},function(e){SvelteInternal.binding_callbacks[e?"unshift":"push"]((()=>{m=e,s(3,m)}))}]}class r extends SvelteInternal.SvelteComponent{constructor(e){super(),SvelteInternal.init(this,e,l,a,SvelteInternal.safe_not_equal,{transitionDuration:7,showIndicators:0,autoplay:8,delay:9,defaultIndex:10,active_item:11,is_vertical:12,allow_infinite_swipe:13,pause_on_hover:14,goTo:15,prevItem:16,nextItem:17},t,[-1,-1])}get transitionDuration(){return this.$$.ctx[7]}set transitionDuration(e){this.$$set({transitionDuration:e}),SvelteInternal.flush()}get showIndicators(){return this.$$.ctx[0]}set showIndicators(e){this.$$set({showIndicators:e}),SvelteInternal.flush()}get autoplay(){return this.$$.ctx[8]}set autoplay(e){this.$$set({autoplay:e}),SvelteInternal.flush()}get delay(){return this.$$.ctx[9]}set delay(e){this.$$set({delay:e}),SvelteInternal.flush()}get defaultIndex(){return this.$$.ctx[10]}set defaultIndex(e){this.$$set({defaultIndex:e}),SvelteInternal.flush()}get active_item(){return this.$$.ctx[11]}get is_vertical(){return this.$$.ctx[12]}set is_vertical(e){this.$$set({is_vertical:e}),SvelteInternal.flush()}get allow_infinite_swipe(){return this.$$.ctx[13]}set allow_infinite_swipe(e){this.$$set({allow_infinite_swipe:e}),SvelteInternal.flush()}get pause_on_hover(){return this.$$.ctx[14]}get goTo(){return this.$$.ctx[15]}get prevItem(){return this.$$.ctx[16]}get nextItem(){return this.$$.ctx[17]}}function o(e){SvelteInternal.append_styles(e,"svelte-1r2gunw",".swipeable-item:not(.is-active){transform:translate3d(100%, 0, 0)}.swipeable-item.svelte-1r2gunw{position:absolute;top:0;bottom:0;left:0;right:0;transition-timing-function:ease-out}.is-item-hidden.svelte-1r2gunw{visibility:hidden}")}function h(e){let t,i,s,n,a;const l=e[7].default,r=SvelteInternal.create_slot(l,e,e[6],null);return{c(){t=SvelteInternal.element("div"),i=SvelteInternal.element("div"),r&&r.c(),SvelteInternal.attr(i,"class","swipeable-item-inner"),SvelteInternal.attr(t,"class",s="swipeable-item "+e[1]+" "+(e[0]?"is-active":"")+" is-item-hidden svelte-1r2gunw"),SvelteInternal.attr(t,"style",e[2]),SvelteInternal.add_render_callback((()=>e[9].call(t)))},m(s,l){SvelteInternal.insert(s,t,l),SvelteInternal.append(t,i),r&&r.m(i,null),e[8](i),n=SvelteInternal.add_iframe_resize_listener(t,e[9].bind(t)),a=!0},p(e,[i]){r&&r.p&&(!a||64&i)&&SvelteInternal.update_slot_base(r,l,e,e[6],a?SvelteInternal.get_slot_changes(l,e[6],i,null):SvelteInternal.get_all_dirty_from_scope(e[6]),null),(!a||3&i&&s!==(s="swipeable-item "+e[1]+" "+(e[0]?"is-active":"")+" is-item-hidden svelte-1r2gunw"))&&SvelteInternal.attr(t,"class",s),(!a||4&i)&&SvelteInternal.attr(t,"style",e[2])},i(e){a||(SvelteInternal.transition_in(r,e),a=!0)},o(e){SvelteInternal.transition_out(r,e),a=!1},d(i){i&&SvelteInternal.detach(t),r&&r.d(i),e[8](null),n()}}}function c(e,t,i){let{$$slots:s={},$$scope:n}=t;const{onMount:a,createEventDispatcher:l}=SvelteInternal;let{active:r=!1}=t,{classes:o=""}=t,{style:h=""}=t,{allow_dynamic_height:c=!1}=t,v=null,p=0;const _=l();function d(){if(v){let{scrollHeight:e,clientHeight:t}=v;_("swipe_item_height_change",{height:Math.max(e,t)})}}return a((()=>{setTimeout((()=>{c&&requestAnimationFrame(d)}),100)})),e.$$set=e=>{"active"in e&&i(0,r=e.active),"classes"in e&&i(1,o=e.classes),"style"in e&&i(2,h=e.style),"allow_dynamic_height"in e&&i(5,c=e.allow_dynamic_height),"$$scope"in e&&i(6,n=e.$$scope)},e.$$.update=()=>{41&e.$$.dirty&&c&&r&&p&&requestAnimationFrame(d)},[r,o,h,p,v,c,n,s,function(e){SvelteInternal.binding_callbacks[e?"unshift":"push"]((()=>{v=e,i(4,v)}))},function(){p=this.clientHeight,i(3,p)}]}class v extends SvelteInternal.SvelteComponent{constructor(e){super(),SvelteInternal.init(this,e,c,h,SvelteInternal.safe_not_equal,{active:0,classes:1,style:2,allow_dynamic_height:5},o)}get active(){return this.$$.ctx[0]}set active(e){this.$$set({active:e}),SvelteInternal.flush()}get classes(){return this.$$.ctx[1]}set classes(e){this.$$set({classes:e}),SvelteInternal.flush()}get style(){return this.$$.ctx[2]}set style(e){this.$$set({style:e}),SvelteInternal.flush()}get allow_dynamic_height(){return this.$$.ctx[5]}set allow_dynamic_height(e){this.$$set({allow_dynamic_height:e}),SvelteInternal.flush()}}export{r as Swipe,v as SwipeItem};
